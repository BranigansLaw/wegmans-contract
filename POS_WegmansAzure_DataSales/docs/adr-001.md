# ADR-001: Pharmacy Data Flow 

## Status

- Accepted (2021-08-06) @ 9:30am
## Members who attended :
- [x] Michael Zobel (Dev POS)
- [x] Jagreet Atwal (Toshiba)
- [x] Mike Wolford (EA)
- [x] Adam Weigert (EA)
- [x] John Boothe JR. (IT Security Compliance)

## Context

- RAW TLOG data flowing from controllers contain pharmacy data that can be related back to a customer.
- Regulations are stated at [hhs.gov.](https://www.hhs.gov/hipaa/for-professionals/security/index.html)

## Decision
- Dev POS + Toshiba will scrub any customer data from Pharmacy Transactions.
    - Loyalty Number
    - Phone number
    - Etc.

- Dev POS + Toshiba will remove the 99 Strings related to pharmacy.
    - Remove "99.00.06" Pharmacy Item Data.
    - Remove "99.20.17" Pharmacy Signature Data.
    - Remove "99.20.16" Pharmacy Signature Information.
    - Scrub "99.10.4" Wegmans Pharmacy Item of sensative data 
    
    TODO: Get requirments from EA \- What data should be included / scrubbed.

- Dev POS + Toshiba will remove shopper club information from pharmacy transactions.
- Dev POS + Toshiba will flag pharmacy transaction in main JSON object "isPharmacy": bool.
    - Key is only printed if TRUE.
  ```json
            {
                "storeNumber": 101,
                "dateTime": "2021-06-30T07:29:00",
                "operator": "00",
                "isPharmacy": true,
                "grossNegative": 0,
                "items": [ ... ],
                "paymentProcessorRequest": {
                    "hostID": "WF",
                    "totalsType": 1,
                    ...
                },
                ...
                "preferredCustomerTransactionDataString": [ ... ]
            }
    ```

## Consequences

- HHS Regulation compliance 
- Rx IT Team will read from the Raw XML which will require them to understand the RAW XML and that their solution will not store the data outside 1010. 
    - The data will be moved via in memory process's only, no intermediate storage location.
